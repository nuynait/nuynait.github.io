<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> How to Setup and Write Blog Using Org and Hexo · Tianyun Shan</title><meta name="description" content="How to Setup and Write Blog Using Org and Hexo - Tianyun Shan"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://blog.jerryshan.com/atom.xml" title="Tianyun Shan"><meta name="generator" content="Hexo 5.4.0"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/sunchongsheng" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/pinggod" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">How to Setup and Write Blog Using Org and Hexo</h1><div class="post-info">Nov 4, 2016</div><div class="post-content"><p>Hexo is a simple and powerful blog framework. Here, we want to connect Hexo with emacs org mode. The result is you can create a new post in emacs, write in org, insert images like normal and deploy it to github pages.</p>
<span id="more"></span>

<h1 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a>Hexo</h1><p>What is hexo? Hexo is a simple and powerful blog framework. Take a look at <a target="_blank" rel="noopener" href="https://hexo.io/">here</a>.</p>
<h2 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h2><p>Install <code>git</code> and <code>nodejs</code> first and then using the following commnd to install hexo</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure>

<h2 id="Setup"><a href="#Setup" class="headerlink" title="Setup"></a>Setup</h2><p>After <code>hexo</code> is installed, use <code>hexo init &lt;folder&gt;</code> to create a blog folder. That is a folder contains all the source codes for you blog (site)</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo init ~/repo/blog/</span><br><span class="line"><span class="built_in">cd</span> ~/repo/blog/</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure>

<h2 id="Minor-Change-in-Config"><a href="#Minor-Change-in-Config" class="headerlink" title="Minor Change in Config"></a>Minor Change in Config</h2><p>Change the title and author name inside the config.</p>
<h2 id="Host-on-Github-Pages"><a href="#Host-on-Github-Pages" class="headerlink" title="Host on Github Pages"></a>Host on Github Pages</h2><p><a target="_blank" rel="noopener" href="https://malekbenz.com/blog/2016/09/10/Create-Host-Blog-for-free-with-Hexo-Github">Here</a> is a blog that teaches you how to host blog in your github repository.</p>
<p><a target="_blank" rel="noopener" href="https://hexo.io/docs/deployment.html">Here</a> is the official documentation about git deployment.</p>
<p>Please create the repository for github pages. The repository name formate is username.github.io. After you finished create the repository, go to the setting and you can see it says <strong>your site is published at xxx</strong>.</p>
<p>Now install <code>hexo-deploy-git</code> to deploy your blog onto github pages.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>

<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line">deploy:</span><br><span class="line"><span class="built_in">type</span>: git</span><br><span class="line">repo: https://github.com/nuynait/nuynait.github.io.git</span><br><span class="line">branch: master</span><br><span class="line">message:</span><br></pre></td></tr></table></figure>

<p>Now run <code>hexo deploy</code> to publish it on github.</p>
<h2 id="Custom-Domain-Github-Pages"><a href="#Custom-Domain-Github-Pages" class="headerlink" title="Custom Domain - Github Pages"></a>Custom Domain - Github Pages</h2><p>In order to have github page custom domain, you have to set the zone file with your domain provider. See <a target="_blank" rel="noopener" href="https://help.github.com/articles/using-a-custom-domain-with-github-pages/">here</a> for help to setup the zone file.</p>
<p>After setting up the zone file, go to <code>&#123;your_hexo_folder&#125;/source/</code> folder, create a new file called <code>CNAME</code>. In that <code>CNAME</code> file, enter your domain. For example the following the what I have in my <code>CNAME</code> file.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">blog.hourglasslab.com</span><br></pre></td></tr></table></figure>

<h1 id="ORG-Mode-Plugin"><a href="#ORG-Mode-Plugin" class="headerlink" title="ORG Mode Plugin"></a>ORG Mode Plugin</h1><p><a target="_blank" rel="noopener" href="https://github.com/CodeFalling/hexo-renderer-org">This</a> is the plugin I use for combine org-mode and hexo.</p>
<h2 id="Install-1"><a href="#Install-1" class="headerlink" title="Install"></a>Install</h2><p><code>cd &lt;blog-folder&gt;</code> Get into your blog folder and install the plugin using the command listed below.</p>
<pre><code>npm install https://github.com/CodeFalling/hexo-renderer-org#emacs --save
</code></pre>
<h1 id="Theme"><a href="#Theme" class="headerlink" title="Theme"></a>Theme</h1><p>For theme, I saw a theme called <a target="_blank" rel="noopener" href="https://github.com/pinggod/hexo-theme-apollo">apollo</a>. I like that style of feeling. So I am using this as a base, on top, I am going to make some modification to reveal my own personality. Thanks a lot to <a target="_blank" rel="noopener" href="https://github.com/pinggod">@pinggod</a> for making the theme.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-renderer-jade hexo-generator-feed hexo-generator-sitemap hexo-browsersync hexo-generator-archive</span><br></pre></td></tr></table></figure>

<h2 id="Creating-a-Theme"><a href="#Creating-a-Theme" class="headerlink" title="Creating a Theme"></a>Creating a Theme</h2><p>If you want to know how to modify a theme, the best way is to learn how to create a theme at first place. Here is some good source learning how to creating the theme.</p>
<p><a target="_blank" rel="noopener" href="http://www.codeblocq.com/2016/03/Create-an-Hexo-Theme-Part-1-Index/">Create an Hexo Theme Part 1 Index</a></p>
<h2 id="Customization"><a href="#Customization" class="headerlink" title="Customization"></a>Customization</h2><p>I changed css to make it look different on different level of headings. The author of <code>apollo</code> think that there is no good way to separate different headers for more than 2 levels. However, I am using the org-mode to create blogs. The title itself will be <code>h1</code>, and I do want to make difference to headings up to level 3 so I modify the css files directly. I don’t know if modify the css directly is a good practise, but I am doing it anyway because I don’t want to look inside to much just for now.</p>
<p>Then I changed some color pattern in css and config the comment service using <a target="_blank" rel="noopener" href="https://disqus.com/">Disqus</a>.</p>
<h1 id="Blog-Admin"><a href="#Blog-Admin" class="headerlink" title="Blog-Admin"></a>Blog-Admin</h1><p>Last but not least, for easier deploy and blog management, I am going to use <a target="_blank" rel="noopener" href="https://github.com/CodeFalling/blog-admin">blog-admin</a> for easier access and deploy my blogs in Emacs.</p>
<h2 id="Install-in-Spacemacs"><a href="#Install-in-Spacemacs" class="headerlink" title="Install in Spacemacs"></a>Install in Spacemacs</h2><p>Thanks to <a target="_blank" rel="noopener" href="https://github.com/CodeFalling/blog-admin/issues/13">CodeFalling</a>. Follow the guild <a target="_blank" rel="noopener" href="https://github.com/CodeFalling/blog-admin/issues/13">here</a> to install in spacemacs.</p>
<h2 id="Config"><a href="#Config" class="headerlink" title="Config"></a>Config</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(setq blog-admin-backend-path &quot;~&#x2F;blog&quot;)</span><br><span class="line">(setq blog-admin-backend-type &#39;hexo)</span><br><span class="line">(setq blog-admin-backend-new-post-in-drafts t) ;; create new post in drafts by default</span><br><span class="line">(setq blog-admin-backend-new-post-with-same-name-dir t) ;; create same-name directory with new post</span><br><span class="line">(setq blog-admin-backend-hexo-config-file &quot;my_config.yml&quot;) ;; default assumes _config.yml</span><br></pre></td></tr></table></figure>

<p>Added a keybinding to access <code>blog-admin-start</code>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(spacemacs&#x2F;set-leader-keys &quot;ob&quot; &#39;blog-admin-start)</span><br></pre></td></tr></table></figure>

<h1 id="Insert-Image-Assets"><a href="#Insert-Image-Assets" class="headerlink" title="Insert Image Assets"></a>Insert Image Assets</h1><p>Again thanks to <a target="_blank" rel="noopener" href="https://github.com/CodeFalling">CodeFalling</a>, we have a plugin to include absolute image path inside org raw files. Take a look at <a target="_blank" rel="noopener" href="https://github.com/CodeFalling/hexo-asset-image">hexo-asset-image</a>.</p>
<p>Install it: <code>npm install hexo-asset-image --save</code></p>
<h2 id="Config-and-Try"><a href="#Config-and-Try" class="headerlink" title="Config and Try"></a>Config and Try</h2><p>After installing the <code>hexo-asset-image</code>, Make sure <code>post_asset_folder: true</code> in your <code>_config.yml</code>.</p>
<p>Now when you put a post inside <code>_post/</code> folder, make a folder of exactly the same name of that post and put all the image file there. Inside the org file use the file link to generate the link to the img.</p>
<figure class="highlight latex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">We have post name &quot;HELLO WORLD.org&quot;</span><br><span class="line"></span><br><span class="line">------- <span class="built_in">_</span>post</span><br><span class="line"> |</span><br><span class="line"> ----- HELLO WORLD.org</span><br><span class="line"> dir-- HELLO WORLD</span><br><span class="line"></span><br><span class="line">------- HELLO WORD</span><br><span class="line"> |</span><br><span class="line"> ----- img1.png</span><br><span class="line"></span><br><span class="line"> Here is how to insert &lt;file:Hello World/image1.png&gt;</span><br></pre></td></tr></table></figure>

<h2 id="Easier-Image-Insertion-Config"><a href="#Easier-Image-Insertion-Config" class="headerlink" title="Easier Image Insertion Config"></a>Easier Image Insertion Config</h2><p>I made some config to my emacs, so that when I want to insert an image, I took a screenshot of that image and it will create the folder, put the image, insert to org file for me. Below is the config function I use. This function is written by <a target="_blank" rel="noopener" href="https://emacs-china.org/users/kirchhoff/activity">kirchhoff</a> posted <a target="_blank" rel="noopener" href="https://emacs-china.org/t/org-mode/79">here</a>. I made some changes to the file name to make sure it adapt to the hexo image insertion workflow.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">(defun my-org-screenshot ()</span><br><span class="line">  &quot;Take a screenshot into a time stamped unique-named file in the</span><br><span class="line">same directory as the org-buffer and insert a link to this file.&quot;</span><br><span class="line">  (interactive)</span><br><span class="line">  (org-display-inline-images)</span><br><span class="line">  (setq filename</span><br><span class="line">        (concat</span><br><span class="line">         (make-temp-name</span><br><span class="line">          (concat (file-name-nondirectory (file-name-sans-extension buffer-file-name))</span><br><span class="line">                  &quot;&#x2F;&quot;</span><br><span class="line">                  (format-time-string &quot;%Y%m%d_%H%M%S_&quot;)) ) &quot;.png&quot;))</span><br><span class="line">  (unless (file-exists-p (file-name-directory filename))</span><br><span class="line">    (make-directory (file-name-directory filename)))</span><br><span class="line">                                        ; take screenshot</span><br><span class="line">  (if (eq system-type &#39;darwin)</span><br><span class="line">      (progn</span><br><span class="line">        (call-process-shell-command &quot;screencapture&quot; nil nil nil nil &quot; -s &quot; (concat</span><br><span class="line">                                                                            &quot;\&quot;&quot; filename &quot;\&quot;&quot; ))</span><br><span class="line">        (call-process-shell-command &quot;convert&quot; nil nil nil nil (concat &quot;\&quot;&quot; filename &quot;\&quot; -resize  \&quot;50%\&quot;&quot; ) (concat &quot;\&quot;&quot; filename &quot;\&quot;&quot; ))</span><br><span class="line">        ))</span><br><span class="line">  (if (eq system-type &#39;gnu&#x2F;linux)</span><br><span class="line">      (call-process &quot;import&quot; nil nil nil filename))</span><br><span class="line">                                        ; insert into file if correctly taken</span><br><span class="line">  (if (file-exists-p filename)</span><br><span class="line">      (insert (concat &quot;#+attr_html: :width 800\n&quot; &quot;[[file:&quot; filename &quot;]]&quot;)))</span><br><span class="line">  ;; (org-display-inline-images)</span><br><span class="line">  )</span><br></pre></td></tr></table></figure>
</div></article></div></main><footer><div class="paginator"><a href="/2016/11/07/Protobuf%20Swift/" class="prev">PREV</a><a href="/2016/11/04/Pass%20Type%20As%20Parameter/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2021 <a href="http://blog.jerryshan.com">Tianyun Shan</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>