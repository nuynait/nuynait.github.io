<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Multiple Dex Files Define Problem · Tianyun Shan</title><meta name="description" content="Multiple Dex Files Define Problem - Tianyun Shan"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://blog.jerryshan.com/atom.xml" title="Tianyun Shan"><meta name="generator" content="Hexo 5.4.0"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/sunchongsheng" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/pinggod" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Multiple Dex Files Define Problem</h1><div class="post-info">Jun 20, 2019</div><div class="post-content"><p>A small issue about <code>Multiple dex files define Landroid/support/v4/os/ResultReceiver</code></p>
<span id="more"></span>

<h1 id="What-Is-The-Problem"><a href="#What-Is-The-Problem" class="headerlink" title="What Is The Problem?"></a>What Is The Problem?</h1><p>I was upgrading the current android project to <em>AndroidX</em> then I encounter the following compile error:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Multiple dex files define Landroid&#x2F;support&#x2F;v4&#x2F;os&#x2F;ResultReceiver;</span><br></pre></td></tr></table></figure>

<p>By doing some research I found that this problem is caused by having duplicate import of the library. For example, you have library <em>A</em>, <em>B</em>. You import <em>A</em> and <em>B</em> in the project. However, <em>B</em> import <em>A</em> as well.</p>
<h1 id="How-To-Fix"><a href="#How-To-Fix" class="headerlink" title="How To Fix?"></a>How To Fix?</h1><p>First, you will need to find you what is the conflict of the library here. Usually this is because you import the android support library in the gradle and some third party library also import the android support library.</p>
<h2 id="Find-Dependencies-List"><a href="#Find-Dependencies-List" class="headerlink" title="Find Dependencies List"></a>Find Dependencies List</h2><p>This <a target="_blank" rel="noopener" href="https://stackoverflow.com/a/21100040/2581637">StackOverflow</a> post helps me a lot. So you can <em>cd</em> into the project root directory and run the following command:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gradlew -q dependencies</span><br></pre></td></tr></table></figure>

<p>If you see java issue returned, that probably because you didn’t install java on your computer. I installed <a target="_blank" rel="noopener" href="https://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html">Java SE Development Kit 8</a></p>
<p>If you see <em>No configurations</em>, use the following command instead:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gradlew -q :app:dependencies</span><br></pre></td></tr></table></figure>

<p>Try to find the issue. Here is a brief screenshot of my configuration:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">+--- com.romandanylyk:pageindicatorview:0.2.0</span><br><span class="line">|    +--- com.android.support:support-annotations:25.3.0</span><br><span class="line">|    +--- com.android.support:support-compat:25.3.0</span><br><span class="line">|    |    \--- com.android.support:support-annotations:25.3.0</span><br><span class="line">|    \--- com.android.support:support-core-ui:25.3.0</span><br><span class="line">|         +--- com.android.support:support-annotations:25.3.0</span><br><span class="line">|         \--- com.android.support:support-compat:25.3.0 (*)</span><br><span class="line">+--- com.loopj.android:android-async-http:1.4.9</span><br><span class="line">|    \--- cz.msebera.android:httpclient:4.3.6</span><br><span class="line">+--- com.nulab-inc:zxcvbn:1.2.5</span><br></pre></td></tr></table></figure>

<p>Because I also import <code>implementation &quot;androidx.appcompat:appcompat:1.0.2&quot;</code>, it is causing the issue of duplicate <em>support-compat</em> module.</p>
<h2 id="Exclude-Duplicates"><a href="#Exclude-Duplicates" class="headerlink" title="Exclude Duplicates"></a>Exclude Duplicates</h2><p>Since I have already found the duplicates, the next step is easy. You can just exclude the duplicates like I did below:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">implementation (&#39;com.romandanylyk:pageindicatorview:0.2.0&#39;) &#123;</span><br><span class="line">    exclude module: &#39;support-compat&#39;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Note that you can find the module name after the <code>:</code>. For example, for library: <code>com.android.support:support-compat:25.3.0</code>, its <strong>group</strong> name is <em>com.android.support</em>, its <strong>module</strong> name is <em>support-compact</em>.</p>
</div></article></div></main><footer><div class="paginator"><a href="/2019/06/24/iTunes%20Connect%20Build%20Not%20Found%20With%20Application%20Loader/" class="prev">PREV</a><a href="/2019/06/13/Android%20Custom%20Deep%20Link/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2021 <a href="http://blog.jerryshan.com">Tianyun Shan</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>